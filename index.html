<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Actividades - Kevin 43287</title>
  <style>
    :root{
      --bg:#0b0b0b; --accent:#00ff88; --muted:#c8e6c9; --text:#e9efe8;
    }
    body{margin:0;font-family:Arial, sans-serif;background:var(--bg);color:var(--text)}
    header{display:flex;align-items:center;gap:16px;padding:18px;background:#0c0c0c}
    header img{height:64px;border-radius:6px}
    .header-center{flex:1;text-align:center}
    .header-center h1{margin:0;color:var(--accent);text-transform:uppercase}
    nav{display:flex;gap:12px}
    nav a{color:var(--accent);text-decoration:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    main{max-width:1000px;margin:24px auto;padding:0 18px}
    .panel{background:#161616;padding:18px;border-radius:10px;border:1px solid rgba(0,255,136,0.08)}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-top:14px}
    .card{background:#0b0b0b;padding:18px;border-radius:10px;border:1px solid rgba(0,255,136,0.06);cursor:pointer;text-align:center}
    .card h3{margin:0;color:var(--accent)}
    .file-list{margin-top:12px;text-align:left}
    .file-list a{display:block;color:var(--accent);text-decoration:none;padding:6px 0}
    iframe{width:100%;height:560px;border-radius:8px;border:1px solid rgba(0,255,136,0.06);margin-top:12px;display:none}
    button{background:var(--accent);border:none;padding:8px 12px;border-radius:8px;color:#000;font-weight:700;cursor:pointer}
    @media(max-width:600px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <img src="upla.png" alt="Logo UPLA" />
    <div class="header-center">
      <h1>BASE DE DATOS 2</h1>
      <div style="color:var(--muted);font-size:13px">Universidad Peruana Los Andes</div>
      <div style="color:var(--accent);font-weight:700">Kevin Alfredo Macha Bruno</div>
    </div>
    <nav>
      <a id="nav-inicio" href="#">Inicio</a>
      <a id="nav-tareas" href="#">Tareas</a>
    </nav>
  </header>

  <main>
    <section id="inicio" class="panel">
      <h2>Bienvenido</h2>
      <p>Portal de Base de Datos II — haz clic en <strong>Tareas</strong> para ver las semanas.</p>
    </section>

    <section id="tareas" class="panel" style="display:none">
      <h2>Tareas - Semanas</h2>
      <div class="grid" id="weeksGrid">
        <!-- tarjetas 1..3 (puedes duplicar si quieres hasta 16) -->
        <div class="card" data-week="Semana1"><h3>Semana1</h3></div>
        <div class="card" data-week="Semana2"><h3>Semana2</h3></div>
        <div class="card" data-week="Semana3"><h3>Semana3</h3></div>
      </div>
    </section>

    <section id="semana" class="panel" style="display:none">
      <h2 id="week-title">Semana</h2>
      <div id="file-list" class="file-list">Selecciona un archivo.</div>
      <iframe id="viewer" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <div style="margin-top:12px">
        <button id="repoBtn">Ir al repositorio</button>
        <button id="backBtn" style="margin-left:8px">Volver</button>
      </div>
    </section>
  </main>

  <script>
    // CONFIG - no tocar
    const USER = 'KEVIN43287';
    const REPO = 'Actividades';
    const BASE_PAGES = https://${USER}.github.io/${REPO};

    // Archivos (usa carpetas sin espacios: Semana1, Semana2, Semana3)
    // Rutas relativas dentro del repo; los espacios en nombres de archivo se codifican con encodeURIComponent más abajo
    const files = {
      "Semana1": [
        "Manual de como subir pagina web a Githlub.pdf",
        "guia para crear cuenta en GibHub.pdf"
      ],
      "Semana2": [
        "EjemplO_1pdf.pdf",
        "Guia_para_instalar_msql_server.pdf"
      ],
      "Semana3": [
        "Informe_ Comparativa_Arquitecturas.pdf"
      ]
    };

    // helpers de navegación
    const inicioEl = document.getElementById('inicio');
    const tareasEl = document.getElementById('tareas');
    const semanaEl = document.getElementById('semana');
    const viewer = document.getElementById('viewer');
    const fileListEl = document.getElementById('file-list');
    const weekTitleEl = document.getElementById('week-title');
    let currentWeek = null;

    function show(id){
      inicioEl.style.display = 'none';
      tareasEl.style.display = 'none';
      semanaEl.style.display = 'none';
      document.getElementById(id).style.display = 'block';
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // eventos header
    document.getElementById('nav-inicio').addEventListener('click', e => { e.preventDefault(); show('inicio'); });
    document.getElementById('nav-tareas').addEventListener('click', e => { e.preventDefault(); show('tareas'); });

    // tarjetas semanas
    document.querySelectorAll('.card').forEach(c=>{
      c.addEventListener('click', ()=>{
        const week = c.getAttribute('data-week'); // e.g. "Semana1"
        openWeek(week);
      });
    });

    // abrir semana: lista archivos y prepara visor
    function openWeek(weekName){
      currentWeek = weekName;
      weekTitleEl.textContent = weekName;
      fileListEl.innerHTML = '';
      viewer.style.display = 'none';
      viewer.src = '';
      const arr = files[weekName] || [];
      if(arr.length === 0){
        fileListEl.innerHTML = '<p>No hay archivos para esta semana.</p>';
      } else {
        arr.forEach(filename=>{
          const a = document.createElement('a');
          a.href = '#';
          a.textContent = filename;
          a.style.cursor = 'pointer';
          a.addEventListener('click', (e)=>{
            e.preventDefault();
            const folder = encodeURIComponent(weekName); // Semana1 -> Semana1
            const fileEnc = encodeURIComponent(filename).replace(/%20/g,'%20'); // encode spaces etc.
            // mejor construir url con encodeURIComponent para cada segmento
            const url = ${BASE_PAGES}/${folder}/${fileEnc};
            showFile(url, filename);
          });
          fileListEl.appendChild(a);
        });
      }

      // configurar botón repo
      document.getElementById('repoBtn').onclick = ()=>{
        const repoFolderUrl = https://github.com/${USER}/${REPO}/tree/main/${encodeURIComponent(weekName)};
        window.open(repoFolderUrl,'_blank');
      };

      // back
      document.getElementById('backBtn').onclick = ()=>{
        show('tareas');
      };

      show('semana');
    }

    // mostrar archivo en iframe (si GitHub Pages lo sirve, funciona)
    function showFile(url, filename){
      // algunos navegadores/servidores no permiten mostrar ciertos tipos; intentamos de todos modos
      viewer.src = url;
      viewer.style.display = 'block';
      viewer.scrollIntoView({behavior:'smooth'});
    }

    // al cargar, mostrar tareas por defecto (si prefieres inicio, cambia a show('inicio'))
    show('tareas');
  </script>
</body>
</html>
